{"ast":null,"code":"var _jsxFileName = \"/home/chloe/Workspace/React-SpringBoot/Workspace/React/test-react2/src/component/mypage/MyPageProfile.jsx\";\nimport { Button } from \"@material-ui/core\";\nimport React from \"react\";\nimport editImg from \"../../edit.png\";\nimport pizzaImg from \"../../pizza.png\";\nimport violationImg from \"../../yellow-card.png\";\nimport ApiService from \"../../service/ApiService\";\nimport EditUserComponent from \"../user/EditUserComponent\";\nimport MyPageWithdraw from \"./MyPageWithdraw\";\nimport \"./MyPageProfile.scss\";\nimport ProfilePhotoUpload from \"./ProfilePhotoUpload\";\nimport axios from \"axios\"; //import tomcat from '/home/chloe/Pictures/tomcat.png'\n\nconst path = \"file://../../../../SpringBoot/JMTRoad2/src/main/webapp\"; //import photo from \"../../../../../SpringBoot/JMTRoad2/src/main/webapp//Final-Project/Nc8m2lGELQKMnRpOh08ivjYVZVH25fpP.png\";\n\nclass MyPageProfile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.loadUser = () => {\n      ApiService.fetchUserById(window.localStorage.getItem(\"userNo\")).then(response => {\n        let user = response.data;\n        console.log(\"찍어보긔..\" + user.userNo);\n        console.log(\" 찍긔... \" + user.nickname);\n        this.setState({\n          //  users: response.data.result\n          userNo: user.userNo,\n          userID: user.userID,\n          nickname: user.nickname,\n          phone: user.phone,\n          birthday: user.birthday,\n          profileImg: user.profileImg,\n          gender: user.gender,\n          shareLocation: user.shareLocation,\n          level: user.level,\n          violation: user.violation\n        });\n      });\n    };\n\n    this.editUser = userNo => {\n      //userNo를 browser의 localStorage에 임시저장함\n      window.localStorage.setItem(\"userNo\", userNo);\n      this.props.history.push(\"/edit-user\");\n    };\n\n    this.openModal = () => {\n      this.setState({\n        isModalOpen: true\n      });\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        isModalOpen: false\n      });\n    };\n\n    this.openWithdrawModal = () => {\n      this.setState({\n        isWithdrawOpen: true\n      });\n    };\n\n    this.closeWithdrawModal = () => {\n      this.setState({\n        isWithdrawOpen: false\n      });\n    };\n\n    this.uploadFile = (file, stateKey) => {\n      this.setState({\n        [stateKey]: this.state[stateKey].concat(file),\n        error: \"\",\n        post: false\n      });\n    };\n\n    this.saveFile = async () => {\n      let flag = true;\n      if (this.state.selectedImage.length === 0) flag = false;\n\n      if (flag) {\n        let params = new FormData();\n        const file = this.state.selectedImage;\n        let userNo = this.state.userNo;\n        file.forEach(f => {\n          params.append(\"file\", f);\n        });\n        await axios({\n          method: \"post\",\n          url: `users/uploadProfileImage/${userNo}`,\n          data: params // headers : {\n          // 'Content-Type': 'multipart/*'\n          // }\n\n        }).then(success => {\n          const data = success.data;\n          console.log(\"잘 업로드 되나 볼까..\" + data);\n        }).catch(error => console.log(\"에러...\" + error));\n        this.setState({\n          selectedImage: \"\",\n          error: \"\",\n          post: true,\n          showing: false\n        });\n      } else {\n        this.setState({\n          error: \"업로드 할 파일을 선택해주세요.\"\n        });\n      }\n    };\n\n    this.follow = async () => {\n      let userNo = window.sessionStorage.getItem(\"userNo\");\n      let targetNo = window.localStorage.getItem(\"userNo\");\n      let params = new FormData();\n      params.append(\"userNo\", userNo);\n      params.append(\"targetNo\", targetNo);\n      await axios({\n        method: 'post',\n        url: 'follow',\n        data: params\n      }).then(success => {\n        const data = success.data;\n        console.log(\"팔로우 성공! \" + data);\n        this.setState({\n          following: true\n        });\n      });\n    };\n\n    this.unFollow = async () => {\n      let userNo = window.sessionStorage.getItem(\"userNo\");\n      let targetNo = window.localStorage.getItem(\"userNo\");\n      let params = new FormData();\n      params.append(\"userNo\", userNo);\n      params.append(\"targetNo\", targetNo);\n      await axios({\n        method: 'post',\n        url: 'unFollow',\n        data: params\n      }).then(success => {\n        const data = success.data;\n        console.log(\"팔로우 취소 성공! \" + data);\n        this.setState({\n          following: false\n        });\n      });\n    };\n\n    this.state = {\n      showing: false,\n      isModalOpen: false,\n      isWithdrawOpen: false,\n      following: false,\n      message: null,\n      userNo: \"\",\n      userID: \"\",\n      nickname: \"\",\n      phone: \"\",\n      birthday: \"\",\n      gender: \"\",\n      profileImg: \"\",\n      shareLocation: \"\",\n      level: \"\",\n      violation: \"\",\n      selectedImage: [],\n      targetNo: \"\",\n      error: \"\",\n      post: false\n    };\n    this.editUser = this.editUser.bind(this);\n    this.loadUser = this.loadUser.bind(this);\n  } // 처음 component가 mount 되면 호출\n\n\n  componentDidMount() {\n    this.loadUser();\n  }\n\n  render() {\n    const _this$state = this.state,\n          showing = _this$state.showing,\n          error = _this$state.error,\n          post = _this$state.post;\n    const uploadFile = this.uploadFile,\n          removeFile = this.removeFile,\n          saveFile = this.saveFile;\n    const imagePath = path + this.state.profileImg;\n    return React.createElement(\"div\", {\n      id: \"MyPageProfile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(Button, {\n      id: \"edit-button\",\n      onClick: this.openModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"editImg\",\n      src: editImg,\n      alt: \"edit-default\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, this.state.profileImg === null ? React.createElement(\"img\", {\n      id: \"pizzaImg\",\n      src: pizzaImg,\n      alt: \"Profile Default\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }) : React.createElement(\"img\", {\n      id: \"profileImg\",\n      src: imagePath,\n      alt: \"Profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), this.state.violation === 22 ? React.createElement(\"img\", {\n      id: \"violationImg\",\n      src: violationImg,\n      alt: \"Yellow Card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }) : \"\", React.createElement(\"button\", {\n      className: \"profile-button\",\n      onClick: () => this.setState({\n        showing: !showing\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4 \\uBCC0\\uACBD\\uD558\\uAE30\"), React.createElement(\"div\", {\n      className: \"ProfilePhotoUpload\",\n      style: {\n        display: showing ? \"block\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(ProfilePhotoUpload, {\n      onAdd: uploadFile,\n      onRemove: removeFile,\n      post: post,\n      stateKey: \"selectedImage\",\n      name: \"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4\\uC744 \\uCD94\\uAC00\\uD558\\uC138\\uC694!\",\n      maxFile: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, error), React.createElement(\"button\", {\n      onClick: saveFile,\n      style: {\n        display: \"block\",\n        position: \"relative\",\n        left: \"225px\",\n        top: \"12px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \" \", \"Save\", \" \")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, this.state.nickname, \" \"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"Level. \", this.state.level), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }), this.state.following === true ? React.createElement(Button, {\n      color: \"primary\",\n      onClick: this.unFollow,\n      style: {\n        display: \"block\",\n        border: \"1px solid gray\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \"\\uD314\\uB85C\\uC789\") : React.createElement(Button, {\n      color: \"primary\",\n      onClick: this.follow,\n      style: {\n        display: \"block\",\n        border: \"1px solid gray\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, \"\\uD314\\uB85C\\uC6B0 \\uD558\\uAE30\")), this.state.isModalOpen && //  <ModalPortal>\n    React.createElement(EditUserComponent, {\n      userNo: this.state.userNo,\n      userID: this.state.userID,\n      nickname: this.state.nickname,\n      phone: this.state.phone,\n      birthday: this.state.birthday,\n      gender: this.state.gender,\n      shareLocation: this.state.shareLocation,\n      onClose: this.closeModal,\n      openWithdraw: this.openWithdrawModal,\n      history: this.props.history,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }) //  </ModalPortal>\n    , \" \", \"\", this.state.isWithdrawOpen && React.createElement(MyPageWithdraw, {\n      onClose: this.closeWithdrawModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }), \" \", \"\");\n  }\n\n}\n\nexport default MyPageProfile;","map":{"version":3,"sources":["/home/chloe/Workspace/React-SpringBoot/Workspace/React/test-react2/src/component/mypage/MyPageProfile.jsx"],"names":["Button","React","editImg","pizzaImg","violationImg","ApiService","EditUserComponent","MyPageWithdraw","ProfilePhotoUpload","axios","path","MyPageProfile","Component","constructor","props","loadUser","fetchUserById","window","localStorage","getItem","then","response","user","data","console","log","userNo","nickname","setState","userID","phone","birthday","profileImg","gender","shareLocation","level","violation","editUser","setItem","history","push","openModal","isModalOpen","closeModal","openWithdrawModal","isWithdrawOpen","closeWithdrawModal","uploadFile","file","stateKey","state","concat","error","post","saveFile","flag","selectedImage","length","params","FormData","forEach","f","append","method","url","success","catch","showing","follow","sessionStorage","targetNo","following","unFollow","message","bind","componentDidMount","render","removeFile","imagePath","display","position","left","top","border"],"mappings":"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","sourcesContent":["import { Button } from \"@material-ui/core\";\nimport React from \"react\";\nimport editImg from \"../../edit.png\";\nimport pizzaImg from \"../../pizza.png\";\nimport violationImg from \"../../yellow-card.png\";\n\nimport ApiService from \"../../service/ApiService\";\nimport EditUserComponent from \"../user/EditUserComponent\";\nimport MyPageWithdraw from \"./MyPageWithdraw\";\n\nimport \"./MyPageProfile.scss\";\nimport ProfilePhotoUpload from \"./ProfilePhotoUpload\";\nimport axios from \"axios\";\n//import tomcat from '/home/chloe/Pictures/tomcat.png'\n\nconst path = \"file://../../../../SpringBoot/JMTRoad2/src/main/webapp\";\n//import photo from \"../../../../../SpringBoot/JMTRoad2/src/main/webapp//Final-Project/Nc8m2lGELQKMnRpOh08ivjYVZVH25fpP.png\";\n\nclass MyPageProfile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showing: false,\n      isModalOpen: false,\n      isWithdrawOpen: false,\n      following: false,\n      message: null,\n      userNo: \"\",\n      userID: \"\",\n      nickname: \"\",\n      phone: \"\",\n      birthday: \"\",\n      gender: \"\",\n      profileImg: \"\",\n      shareLocation: \"\",\n      level: \"\",\n      violation: \"\",\n      selectedImage: [],\n      targetNo: \"\",\n      error: \"\",\n      post: false\n    };\n\n    this.editUser = this.editUser.bind(this);\n    this.loadUser = this.loadUser.bind(this);\n  }\n\n  // 처음 component가 mount 되면 호출\n  componentDidMount() {\n    this.loadUser();\n  }\n\n  loadUser = () => {\n    ApiService.fetchUserById(window.localStorage.getItem(\"userNo\")).then(\n      response => {\n        let user = response.data;\n        console.log(\"찍어보긔..\" + user.userNo);\n        console.log(\" 찍긔... \" + user.nickname);\n        this.setState({\n          //  users: response.data.result\n          userNo: user.userNo,\n          userID: user.userID,\n          nickname: user.nickname,\n          phone: user.phone,\n          birthday: user.birthday,\n          profileImg: user.profileImg,\n          gender: user.gender,\n          shareLocation: user.shareLocation,\n          level: user.level,\n          violation: user.violation\n        });\n      }\n    );\n  };\n\n  editUser = userNo => {\n    //userNo를 browser의 localStorage에 임시저장함\n    window.localStorage.setItem(\"userNo\", userNo);\n    this.props.history.push(\"/edit-user\");\n  };\n\n  openModal = () => {\n    this.setState({\n      isModalOpen: true\n    });\n  };\n\n  closeModal = () => {\n    this.setState({\n      isModalOpen: false\n    });\n  };\n\n  openWithdrawModal = () => {\n    this.setState({\n      isWithdrawOpen: true\n    });\n  };\n\n  closeWithdrawModal = () => {\n    this.setState({\n      isWithdrawOpen: false\n    });\n  };\n\n  uploadFile = (file, stateKey) => {\n    this.setState({\n      [stateKey]: this.state[stateKey].concat(file),\n      error: \"\",\n      post: false\n    });\n  };\n\n  saveFile = async () => {\n    let flag = true;\n\n    if (this.state.selectedImage.length === 0) flag = false;\n\n    if (flag) {\n      let params = new FormData();\n      const file = this.state.selectedImage;\n\n      let userNo = this.state.userNo;\n\n      file.forEach(f => {\n        params.append(\"file\", f);\n      });\n\n      await axios({\n        method: \"post\",\n        url: `users/uploadProfileImage/${userNo}`,\n        data: params\n        // headers : {\n        // 'Content-Type': 'multipart/*'\n        // }\n      })\n        .then(success => {\n          const data = success.data;\n          console.log(\"잘 업로드 되나 볼까..\" + data);\n        })\n        .catch(error => console.log(\"에러...\" + error));\n      this.setState({\n        selectedImage: \"\",\n        error: \"\",\n        post: true,\n        showing: false\n      });\n    } else {\n      this.setState({\n        error: \"업로드 할 파일을 선택해주세요.\"\n      });\n    }\n  };\n\n  follow = async () => {\n    let userNo = window.sessionStorage.getItem(\"userNo\");\n    let targetNo = window.localStorage.getItem(\"userNo\");\n    let params = new FormData();\n\n    params.append(\"userNo\", userNo);\n    params.append(\"targetNo\",targetNo);\n\n    await axios ( {\n      method: 'post',\n      url: 'follow',\n      data: params\n    })\n    .then (success => {\n      const data = success.data;\n      console.log(\"팔로우 성공! \" +data);\n      this.setState({\n        following: true\n      })\n    })\n  };\n\n  unFollow = async () => {\n    let userNo = window.sessionStorage.getItem(\"userNo\");\n    let targetNo = window.localStorage.getItem(\"userNo\");\n    let params = new FormData();\n\n    params.append(\"userNo\", userNo);\n    params.append(\"targetNo\",targetNo);\n\n    await axios ({\n      method: 'post',\n      url: 'unFollow',\n      data: params\n    })\n    .then (success => {\n      const data = success.data;\n      console.log(\"팔로우 취소 성공! \" + data);\n      this.setState({\n        following: false\n      })\n    })\n  };\n\n  render() {\n    const { showing, error, post } = this.state;\n    const { uploadFile, removeFile, saveFile } = this;\n    const imagePath = path + this.state.profileImg;\n\n    return (\n      <div id=\"MyPageProfile\">\n        <Button id=\"edit-button\" onClick={this.openModal}>\n          <img id=\"editImg\" src={editImg} alt=\"edit-default\" />\n        </Button>\n        <div id=\"profile\">\n          {/* 등록한 프사 없을 때는 피자 이미지 출력 */}\n          {this.state.profileImg === null ? (\n            <img id=\"pizzaImg\" src={pizzaImg} alt=\"Profile Default\" />\n          ) : (\n            <img id=\"profileImg\" src={imagePath} alt=\"Profile\" />\n          )}\n          <br />\n          {/* violation 22면 옐로카드 이미지 출력하기 */}\n\n          {this.state.violation === 22 ? (\n            <img id=\"violationImg\" src={violationImg} alt=\"Yellow Card\" />\n          ) : (\n            \"\"\n          )}\n\n          <button\n            className=\"profile-button\"\n            onClick={() => this.setState({ showing: !showing })}\n          >\n            프로필 사진 변경하기\n          </button>\n          <div\n            className=\"ProfilePhotoUpload\"\n            style={{ display: showing ? \"block\" : \"none\" }}\n          >\n            <ProfilePhotoUpload\n              onAdd={uploadFile}\n              onRemove={removeFile}\n              post={post}\n              stateKey=\"selectedImage\"\n              name=\"프로필 사진을 추가하세요!\"\n              maxFile=\"1\"\n            />\n            <div>{error}</div>\n            <button\n              onClick={saveFile}\n              style={{\n                display: \"block\",\n                position: \"relative\",\n                left: \"225px\",\n                top: \"12px\"\n              }}\n            >\n              {\" \"}\n              Save{\" \"}\n            </button>\n          </div>\n          <p>{this.state.nickname} </p>\n          <p>Level. {this.state.level}</p>\n          <br/><br/>\n          {this.state.following === true ? (\n            <Button color=\"primary\" onClick = {this.unFollow} style={{display: \"block\", border: \"1px solid gray\"}}>\n              팔로잉\n            </Button>\n          ) : (\n            <Button color=\"primary\" onClick={this.follow} style={{display: \"block\", border: \"1px solid gray\"}}>\n              팔로우 하기\n            </Button>\n          )}\n        </div>\n\n        {this.state.isModalOpen && (\n          //  <ModalPortal>\n          <EditUserComponent\n            userNo={this.state.userNo}\n            userID={this.state.userID}\n            nickname={this.state.nickname}\n            phone={this.state.phone}\n            birthday={this.state.birthday}\n            gender={this.state.gender}\n            shareLocation={this.state.shareLocation}\n            onClose={this.closeModal}\n            openWithdraw={this.openWithdrawModal}\n            history={this.props.history}\n          />\n          //  </ModalPortal>\n        )}{\" \"}\n        {\"\"}\n        {this.state.isWithdrawOpen && (\n          <MyPageWithdraw onClose={this.closeWithdrawModal} />\n        )}{\" \"}\n        {\"\"}\n        {/* map 이용\n        \n        {this.state.users.map(\n          row => (\n          <div key={row.userNo}>\n            <Button id=\"edit-button\" onClick={this.openModal}>\n              <img id=\"editImg\" src={editImg} alt=\"edit-default\" />\n            </Button>\n            <div id=\"profile\">\n              <img id=\"pizzaImg\" src={pizzaImg} alt=\"Profile-default\" />\n              <p>{row.nickname} </p>\n              <p>Level. {row.level}</p>\n            </div>\n            {this.state.isModalOpen && (\n              // <ModalPortal>\n              <EditUserComponent\n                userNo={row.userNo}\n                userId={row.userId}\n                nickname={row.nickname}\n                phone={row.phone}\n                birthday={row.birthday}\n                gender={row.gender}\n                shareLocation={row.shareLocation}\n                onClose={this.closeModal}\n              />\n              // </ModalPortal>\n            )}{\" \"} */}\n      </div>\n    );\n  }\n}\n\nexport default MyPageProfile;\n"]},"metadata":{},"sourceType":"module"}